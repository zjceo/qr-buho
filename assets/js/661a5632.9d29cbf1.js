"use strict";(globalThis.webpackChunkqr_buho=globalThis.webpackChunkqr_buho||[]).push([[5643],{82222(e,i,n){n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>l,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"qr-devs/despliegue/mantenimiento/actualizar-qrapi","title":"Actualizar QR API","description":"Gu\xeda completa para actualizar el sistema QR API despu\xe9s de la migraci\xf3n del servidor GitLab.","source":"@site/docs/qr-devs/despliegue/mantenimiento/actualizar-qrapi.md","sourceDirName":"qr-devs/despliegue/mantenimiento","slug":"/qr-devs/despliegue/mantenimiento/actualizar-qrapi","permalink":"/qr-devs/despliegue/mantenimiento/actualizar-qrapi","draft":false,"unlisted":false,"editUrl":"https://github.com/zjceo/qr-buho/tree/main/docs/qr-devs/despliegue/mantenimiento/actualizar-qrapi.md","tags":[],"version":"current","lastUpdatedBy":"Administrator","lastUpdatedAt":1768780640000,"sidebarPosition":1,"frontMatter":{"title":"Actualizar QR API","description":"Gu\xeda completa para actualizar el sistema QR API despu\xe9s de la migraci\xf3n del servidor GitLab.","sidebar_position":1},"sidebar":"defaultSidebar","previous":{"title":"Instalaci\xf3n en Windows","permalink":"/qr-devs/despliegue/plataformas/instalacion"}}');var r=n(35656),s=n(56610);const l={title:"Actualizar QR API",description:"Gu\xeda completa para actualizar el sistema QR API despu\xe9s de la migraci\xf3n del servidor GitLab.",sidebar_position:1},d="\ud83d\udd04 Actualizar QR API",c={},t=[{value:"\ud83d\udccb Descripci\xf3n General",id:"-descripci\xf3n-general",level:2},{value:"\ud83c\udfaf Pasos de Actualizaci\xf3n",id:"-pasos-de-actualizaci\xf3n",level:2},{value:"Paso 1: Cambiar URL del Repositorio",id:"paso-1-cambiar-url-del-repositorio",level:3},{value:"Paso 2: Descargar Cambios",id:"paso-2-descargar-cambios",level:3},{value:"Paso 3: Instalar Dependencias",id:"paso-3-instalar-dependencias",level:3},{value:"3.1 Instalar pnpm Globalmente",id:"31-instalar-pnpm-globalmente",level:4},{value:"3.2 Instalar Dependencias del Proyecto",id:"32-instalar-dependencias-del-proyecto",level:4},{value:"Paso 4: Compilar el Proyecto",id:"paso-4-compilar-el-proyecto",level:3},{value:"Paso 5: Ejecutar Migraciones",id:"paso-5-ejecutar-migraciones",level:3},{value:"5.1 Migraci\xf3n Principal",id:"51-migraci\xf3n-principal",level:4},{value:"5.2 Migraci\xf3n de Tenants",id:"52-migraci\xf3n-de-tenants",level:4},{value:"\ud83d\udd27 Comandos Completos",id:"-comandos-completos",level:2},{value:"\u26a0\ufe0f Consideraciones Importantes",id:"\ufe0f-consideraciones-importantes",level:2},{value:"Antes de Actualizar",id:"antes-de-actualizar",level:3},{value:"Durante la Actualizaci\xf3n",id:"durante-la-actualizaci\xf3n",level:3},{value:"Despu\xe9s de la Actualizaci\xf3n",id:"despu\xe9s-de-la-actualizaci\xf3n",level:3},{value:"\ud83d\udea8 Soluci\xf3n de Problemas",id:"-soluci\xf3n-de-problemas",level:2},{value:"Error de Conexi\xf3n Git",id:"error-de-conexi\xf3n-git",level:3},{value:"Error en Migraciones",id:"error-en-migraciones",level:3},{value:"Error en Dependencias",id:"error-en-dependencias",level:3},{value:"\ud83d\udccb Resumen de Comandos",id:"-resumen-de-comandos",level:2}];function o(e){const i={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"-actualizar-qr-api",children:"\ud83d\udd04 Actualizar QR API"})}),"\n",(0,r.jsx)(i.admonition,{title:"\xa1IMPORTANTE - Migraci\xf3n de Servidor GitLab!",type:"danger",children:(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Hemos migrado nuestro servidor de GitLab."})," Este proceso de actualizaci\xf3n es necesario para conectar con la nueva URL del repositorio."]})}),"\n",(0,r.jsx)(i.h2,{id:"-descripci\xf3n-general",children:"\ud83d\udccb Descripci\xf3n General"}),"\n",(0,r.jsx)(i.p,{children:"Esta gu\xeda te ayudar\xe1 a actualizar tu sistema QR API despu\xe9s de la migraci\xf3n de nuestro servidor de GitLab. El proceso incluye cambiar la URL del repositorio y actualizar todas las dependencias."}),"\n",(0,r.jsx)(i.admonition,{title:"Nota Importante",type:"info",children:(0,r.jsxs)(i.p,{children:["Este proceso ",(0,r.jsx)(i.strong,{children:"solo se debe realizar una vez"})," despu\xe9s de la migraci\xf3n del servidor."]})}),"\n",(0,r.jsx)(i.h2,{id:"-pasos-de-actualizaci\xf3n",children:"\ud83c\udfaf Pasos de Actualizaci\xf3n"}),"\n",(0,r.jsx)(i.h3,{id:"paso-1-cambiar-url-del-repositorio",children:"Paso 1: Cambiar URL del Repositorio"}),"\n",(0,r.jsx)(i.p,{children:"El primer paso es actualizar la URL del repositorio remoto para apuntar al nuevo servidor:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"git remote set-url origin https://git.buho.la/qr-api/app.git\n"})}),"\n",(0,r.jsxs)(i.admonition,{title:"Verificaci\xf3n",type:"tip",children:[(0,r.jsx)(i.p,{children:"Puedes verificar que la URL se cambi\xf3 correctamente con:"}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"git remote -v\n"})})]}),"\n",(0,r.jsx)(i.h3,{id:"paso-2-descargar-cambios",children:"Paso 2: Descargar Cambios"}),"\n",(0,r.jsx)(i.p,{children:"Descarga los \xfaltimos cambios del repositorio:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"git pull origin main\n"})}),"\n",(0,r.jsx)(i.admonition,{title:"Credenciales",type:"info",children:(0,r.jsx)(i.p,{children:"Si se te solicita, ingresa tus credenciales de GitLab (usuario y token)."})}),"\n",(0,r.jsx)(i.h3,{id:"paso-3-instalar-dependencias",children:"Paso 3: Instalar Dependencias"}),"\n",(0,r.jsx)(i.h4,{id:"31-instalar-pnpm-globalmente",children:"3.1 Instalar pnpm Globalmente"}),"\n",(0,r.jsx)(i.p,{children:"Si no tienes pnpm instalado globalmente:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"npm i -g pnpm\n"})}),"\n",(0,r.jsx)(i.h4,{id:"32-instalar-dependencias-del-proyecto",children:"3.2 Instalar Dependencias del Proyecto"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"pnpm install\n"})}),"\n",(0,r.jsx)(i.h3,{id:"paso-4-compilar-el-proyecto",children:"Paso 4: Compilar el Proyecto"}),"\n",(0,r.jsx)(i.p,{children:"Genera los archivos de producci\xf3n:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"pnpm run build\n"})}),"\n",(0,r.jsx)(i.h3,{id:"paso-5-ejecutar-migraciones",children:"Paso 5: Ejecutar Migraciones"}),"\n",(0,r.jsx)(i.h4,{id:"51-migraci\xf3n-principal",children:"5.1 Migraci\xf3n Principal"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"php artisan migrate\n"})}),"\n",(0,r.jsx)(i.h4,{id:"52-migraci\xf3n-de-tenants",children:"5.2 Migraci\xf3n de Tenants"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"php artisan tenants:migrate\n"})}),"\n",(0,r.jsx)(i.h2,{id:"-comandos-completos",children:"\ud83d\udd27 Comandos Completos"}),"\n",(0,r.jsx)(i.p,{children:"Si prefieres ejecutar todo en secuencia, puedes usar estos comandos:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# Cambiar URL del repositorio\r\ngit remote set-url origin https://git.buho.la/qr-api/app.git\r\n\r\n# Descargar cambios\r\ngit pull origin main\r\n\r\n# Instalar pnpm globalmente\r\nnpm i -g pnpm\r\n\r\n# Instalar dependencias\r\npnpm install\r\n\r\n# Compilar proyecto\r\npnpm run build\r\n\r\n# Ejecutar migraciones\r\nphp artisan migrate\r\nphp artisan tenants:migrate\n"})}),"\n",(0,r.jsx)(i.h2,{id:"\ufe0f-consideraciones-importantes",children:"\u26a0\ufe0f Consideraciones Importantes"}),"\n",(0,r.jsx)(i.h3,{id:"antes-de-actualizar",children:"Antes de Actualizar"}),"\n",(0,r.jsx)(i.admonition,{title:"Preparaci\xf3n",type:"warning",children:(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Respalda"})," tu base de datos antes de ejecutar las migraciones"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Verifica"})," que tienes permisos de escritura en el directorio"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Aseg\xfarate"})," de que el servidor tiene suficiente espacio en disco"]}),"\n"]})}),"\n",(0,r.jsx)(i.h3,{id:"durante-la-actualizaci\xf3n",children:"Durante la Actualizaci\xf3n"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"No interrumpas"})," el proceso de migraci\xf3n"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Revisa"})," los mensajes de error si aparecen"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Espera"})," a que cada comando termine antes de ejecutar el siguiente"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"despu\xe9s-de-la-actualizaci\xf3n",children:"Despu\xe9s de la Actualizaci\xf3n"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Verifica"})," que la aplicaci\xf3n funciona correctamente"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Prueba"})," las funcionalidades principales"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Revisa"})," los logs por posibles errores"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"-soluci\xf3n-de-problemas",children:"\ud83d\udea8 Soluci\xf3n de Problemas"}),"\n",(0,r.jsx)(i.h3,{id:"error-de-conexi\xf3n-git",children:"Error de Conexi\xf3n Git"}),"\n",(0,r.jsx)(i.p,{children:"Si tienes problemas para conectar con el nuevo repositorio:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# Verificar configuraci\xf3n de Git\r\ngit config --list\r\n\r\n# Limpiar credenciales si es necesario\r\ngit config --global --unset credential.helper\n"})}),"\n",(0,r.jsx)(i.h3,{id:"error-en-migraciones",children:"Error en Migraciones"}),"\n",(0,r.jsx)(i.p,{children:"Si las migraciones fallan:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# Limpiar cach\xe9\r\nphp artisan config:clear\r\nphp artisan cache:clear\r\n\r\n# Reintentar migraci\xf3n\r\nphp artisan migrate --force\n"})}),"\n",(0,r.jsx)(i.h3,{id:"error-en-dependencias",children:"Error en Dependencias"}),"\n",(0,r.jsx)(i.p,{children:"Si hay problemas con pnpm:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# Limpiar cach\xe9 de pnpm\r\npnpm store prune\r\n\r\n# Reinstalar dependencias\r\nrm -rf node_modules\r\npnpm install\n"})}),"\n",(0,r.jsx)(i.h2,{id:"-resumen-de-comandos",children:"\ud83d\udccb Resumen de Comandos"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Paso"}),(0,r.jsx)(i.th,{children:"Comando"}),(0,r.jsx)(i.th,{children:"Descripci\xf3n"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"1"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"git remote set-url origin https://git.buho.la/qr-api/app.git"})}),(0,r.jsx)(i.td,{children:"Cambiar URL del repositorio"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"2"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"git pull origin main"})}),(0,r.jsx)(i.td,{children:"Descargar cambios"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"3"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"npm i -g pnpm"})}),(0,r.jsx)(i.td,{children:"Instalar pnpm globalmente"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"4"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"pnpm install"})}),(0,r.jsx)(i.td,{children:"Instalar dependencias"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"5"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"pnpm run build"})}),(0,r.jsx)(i.td,{children:"Compilar proyecto"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"6"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"php artisan migrate"})}),(0,r.jsx)(i.td,{children:"Ejecutar migraci\xf3n principal"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"7"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"php artisan tenants:migrate"})}),(0,r.jsx)(i.td,{children:"Ejecutar migraci\xf3n de tenants"})]})]})]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.admonition,{title:"\xa1Actualizaci\xf3n Completada!",type:"success",children:(0,r.jsx)(i.p,{children:"Una vez que hayas ejecutado todos los pasos, tu sistema QR API estar\xe1 actualizado y funcionando con el nuevo servidor GitLab."})})]})}function p(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);